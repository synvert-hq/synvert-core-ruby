<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Synvert::Core::Engine::Elegant
  
    &mdash; Documentation by YARD 0.9.36
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Synvert::Core::Engine::Elegant";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Synvert.html" title="Synvert (module)">Synvert</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Core.html" title="Synvert::Core (module)">Core</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Engine.html" title="Synvert::Core::Engine (module)">Engine</a></span></span>
     &raquo; 
    <span class="title">Elegant</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Synvert::Core::Engine::Elegant
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="Haml.html" title="Synvert::Core::Engine::Haml (class)">Haml</a></span>, <span class='object_link'><a href="Slim.html" title="Synvert::Core::Engine::Slim (class)">Slim</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/synvert/core/engine/elegant.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Engine::Elegant provides some helper methods for engines
who read block code without end.
For those engines, it will try to insert <code>end\n</code> when encode,
while delete <code>end\n</code> when generate_transform_proc.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="END_LINE-constant" class="">END_LINE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>end\n</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="WHITESPACE-constant" class="">WHITESPACE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="DO_BLOCK_REGEX-constant" class="">DO_BLOCK_REGEX =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'> do(\s|\z|\n)</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="IF_KEYWORDS-constant" class="">IF_KEYWORDS =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='tstring_content'>if</span><span class='words_sep'> </span><span class='tstring_content'>unless</span><span class='words_sep'> </span><span class='tstring_content'>begin</span><span class='words_sep'> </span><span class='tstring_content'>case</span><span class='words_sep'> </span><span class='tstring_content'>for</span><span class='words_sep'> </span><span class='tstring_content'>while</span><span class='words_sep'> </span><span class='tstring_content'>until</span><span class='tstring_end'>]</span></span></pre></dd>
      
        <dt id="ELSE_KEYWORDS-constant" class="">ELSE_KEYWORDS =
          
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[</span><span class='tstring_content'>else</span><span class='words_sep'> </span><span class='tstring_content'>elsif</span><span class='words_sep'> </span><span class='tstring_content'>when</span><span class='words_sep'> </span><span class='tstring_content'>in</span><span class='words_sep'> </span><span class='tstring_content'>rescue</span><span class='words_sep'> </span><span class='tstring_content'>ensure</span><span class='tstring_end'>]</span></span></pre></dd>
      
    </dl>
  







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_transform_proc-instance_method" title="#generate_transform_proc (instance method)">#<strong>generate_transform_proc</strong>(encoded_source)  &#x21d2; Proc </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Generate transform proc, it&#39;s used to adjust start and end position of actions.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#insert_end%3F-instance_method" title="#insert_end? (instance method)">#<strong>insert_end?</strong>(leading_spaces_counts, current_leading_spaces_count, equal = true)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Check if the current leading_spaces_count is less than or equal to the last leading_spaces_count in leading_spaces_counts.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scan_ruby_expression-instance_method" title="#scan_ruby_expression (instance method)">#<strong>scan_ruby_expression</strong>(scanner, new_code, leading_spaces_counts, leading_spaces_count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scan_ruby_interpolation_and_plain_text-instance_method" title="#scan_ruby_interpolation_and_plain_text (instance method)">#<strong>scan_ruby_interpolation_and_plain_text</strong>(scanner, new_code, leading_spaces_counts, leading_spaces_count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scan_ruby_statement-instance_method" title="#scan_ruby_statement (instance method)">#<strong>scan_ruby_statement</strong>(scanner, new_code, leading_spaces_counts, leading_spaces_count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="generate_transform_proc-instance_method">
  
    #<strong>generate_transform_proc</strong>(encoded_source)  &#x21d2; <tt>Proc</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Generate transform proc, it&#39;s used to adjust start and end position of actions.
Due to the fact that we insert <code>end\n</code> when encode the source code, we need to adjust
start and end position of actions to match the original source code.
e.g. if end\n exists in position 10, action start position is 20 and end position is 30,
then action start position should be 16 and end position should be 26.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>encoded_source</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>encoded source.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>transform proc.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/synvert/core/engine/elegant.rb', line 25</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_transform_proc'>generate_transform_proc</span><span class='lparen'>(</span><span class='id identifier rubyid_encoded_source'>encoded_source</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_actions'>actions</span><span class='op'>|</span>
    <span class='id identifier rubyid_start'>start</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_indices'>indices</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_loop'>loop</span> <span class='kw'>do</span>
      <span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_encoded_source'>encoded_source</span><span class='lbracket'>[</span><span class='id identifier rubyid_start'>start</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#END_LINE-constant" title="Synvert::Core::Engine::Elegant::END_LINE (constant)">END_LINE</a></span></span><span class='rparen'>)</span>
      <span class='kw'>break</span> <span class='kw'>unless</span> <span class='id identifier rubyid_index'>index</span>

      <span class='id identifier rubyid_indices'>indices</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_start'>start</span> <span class='op'>+</span> <span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_start'>start</span> <span class='op'>+=</span> <span class='id identifier rubyid_index'>index</span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="#END_LINE-constant" title="Synvert::Core::Engine::Elegant::END_LINE (constant)">END_LINE</a></span></span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_indices'>indices</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
      <span class='const'>NodeMutation</span><span class='op'>::</span><span class='const'>Helper</span><span class='period'>.</span><span class='id identifier rubyid_iterate_actions'>iterate_actions</span><span class='lparen'>(</span><span class='id identifier rubyid_actions'>actions</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_action'>action</span><span class='op'>|</span>
        <span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span> <span class='op'>-=</span> <span class='const'><span class='object_link'><a href="#END_LINE-constant" title="Synvert::Core::Engine::Elegant::END_LINE (constant)">END_LINE</a></span></span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='kw'>if</span> <span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_index'>index</span>
        <span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_end'>end</span> <span class='op'>-=</span> <span class='const'><span class='object_link'><a href="#END_LINE-constant" title="Synvert::Core::Engine::Elegant::END_LINE (constant)">END_LINE</a></span></span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='kw'>if</span> <span class='id identifier rubyid_action'>action</span><span class='period'>.</span><span class='id identifier rubyid_end'>end</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_index'>index</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="insert_end?-instance_method">
  
    #<strong>insert_end?</strong>(leading_spaces_counts, current_leading_spaces_count, equal = true)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Check if the current leading_spaces_count is less than or equal to the last leading_spaces_count in leading_spaces_counts.
If so, pop the last leading_spaces_count and return true.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/synvert/core/engine/elegant.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_insert_end?'>insert_end?</span><span class='lparen'>(</span><span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='comma'>,</span> <span class='id identifier rubyid_current_leading_spaces_count'>current_leading_spaces_count</span><span class='comma'>,</span> <span class='id identifier rubyid_equal'>equal</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_operation'>operation</span> <span class='op'>=</span> <span class='id identifier rubyid_equal'>equal</span> <span class='op'>?</span> <span class='symbol'>:&lt;=</span> <span class='op'>:</span> <span class='symbol'>:&lt;</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_current_leading_spaces_count'>current_leading_spaces_count</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_operation'>operation</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
    <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="scan_ruby_expression-instance_method">
  
    #<strong>scan_ruby_expression</strong>(scanner, new_code, leading_spaces_counts, leading_spaces_count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/synvert/core/engine/elegant.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scan_ruby_expression'>scan_ruby_expression</span><span class='lparen'>(</span><span class='id identifier rubyid_scanner'>scanner</span><span class='comma'>,</span> <span class='id identifier rubyid_new_code'>new_code</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_insert_end?'>insert_end?</span><span class='lparen'>(</span><span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="#END_LINE-constant" title="Synvert::Core::Engine::Elegant::END_LINE (constant)">END_LINE</a></span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_rest'>rest</span> <span class='op'>=</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*?(\z|\n)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_rest'>rest</span> <span class='op'>=~</span> <span class='const'><span class='object_link'><a href="#DO_BLOCK_REGEX-constant" title="Synvert::Core::Engine::Elegant::DO_BLOCK_REGEX (constant)">DO_BLOCK_REGEX</a></span></span>
    <span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_rest'>rest</span>

  <span class='kw'>while</span> <span class='id identifier rubyid_rest'>rest</span><span class='period'>.</span><span class='id identifier rubyid_rstrip'>rstrip</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rest'>rest</span> <span class='op'>=</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*?(\z|\n)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_rest'>rest</span> <span class='op'>=~</span> <span class='const'><span class='object_link'><a href="#DO_BLOCK_REGEX-constant" title="Synvert::Core::Engine::Elegant::DO_BLOCK_REGEX (constant)">DO_BLOCK_REGEX</a></span></span>
      <span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_rest'>rest</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="scan_ruby_interpolation_and_plain_text-instance_method">
  
    #<strong>scan_ruby_interpolation_and_plain_text</strong>(scanner, new_code, leading_spaces_counts, leading_spaces_count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/synvert/core/engine/elegant.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scan_ruby_interpolation_and_plain_text'>scan_ruby_interpolation_and_plain_text</span><span class='lparen'>(</span><span class='id identifier rubyid_scanner'>scanner</span><span class='comma'>,</span> <span class='id identifier rubyid_new_code'>new_code</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_insert_end?'>insert_end?</span><span class='lparen'>(</span><span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="#END_LINE-constant" title="Synvert::Core::Engine::Elegant::END_LINE (constant)">END_LINE</a></span></span>
  <span class='kw'>end</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.*?)(\\*)#\{</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='comment'># it matches interpolation &quot;  #{current_user.login}&quot;
</span>    <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#WHITESPACE-constant" title="Synvert::Core::Engine::Elegant::WHITESPACE (constant)">WHITESPACE</a></span></span> <span class='op'>*</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>3</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='int'>1</span>
      <span class='kw'>while</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*?([\{\}])</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>}</span><span class='tstring_end'>&#39;</span></span>
          <span class='id identifier rubyid_count'>count</span> <span class='op'>-=</span> <span class='int'>1</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>0</span>
            <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='kw'>break</span>
          <span class='kw'>else</span>
            <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span>
          <span class='kw'>end</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_count'>count</span> <span class='op'>+=</span> <span class='int'>1</span>
          <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*?\z</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#WHITESPACE-constant" title="Synvert::Core::Engine::Elegant::WHITESPACE (constant)">WHITESPACE</a></span></span> <span class='op'>*</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*?\n</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#WHITESPACE-constant" title="Synvert::Core::Engine::Elegant::WHITESPACE (constant)">WHITESPACE</a></span></span> <span class='op'>*</span> <span class='lparen'>(</span><span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_matched'>matched</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="scan_ruby_statement-instance_method">
  
    #<strong>scan_ruby_statement</strong>(scanner, new_code, leading_spaces_counts, leading_spaces_count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/synvert/core/engine/elegant.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scan_ruby_statement'>scan_ruby_statement</span><span class='lparen'>(</span><span class='id identifier rubyid_scanner'>scanner</span><span class='comma'>,</span> <span class='id identifier rubyid_new_code'>new_code</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s*</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_keyword'>keyword</span> <span class='op'>=</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rest'>rest</span> <span class='op'>=</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*?(\z|\n)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_insert_end?'>insert_end?</span><span class='lparen'>(</span><span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span><span class='comma'>,</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span><span class='comma'>,</span> <span class='op'>!</span><span class='const'><span class='object_link'><a href="#ELSE_KEYWORDS-constant" title="Synvert::Core::Engine::Elegant::ELSE_KEYWORDS (constant)">ELSE_KEYWORDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_keyword'>keyword</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="#END_LINE-constant" title="Synvert::Core::Engine::Elegant::END_LINE (constant)">END_LINE</a></span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="#IF_KEYWORDS-constant" title="Synvert::Core::Engine::Elegant::IF_KEYWORDS (constant)">IF_KEYWORDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_keyword'>keyword</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_rest'>rest</span> <span class='op'>=~</span> <span class='const'><span class='object_link'><a href="#DO_BLOCK_REGEX-constant" title="Synvert::Core::Engine::Elegant::DO_BLOCK_REGEX (constant)">DO_BLOCK_REGEX</a></span></span>
    <span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_keyword'>keyword</span>
  <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_rest'>rest</span>

  <span class='kw'>while</span> <span class='id identifier rubyid_rest'>rest</span><span class='period'>.</span><span class='id identifier rubyid_rstrip'>rstrip</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_rest'>rest</span> <span class='op'>=</span> <span class='id identifier rubyid_scanner'>scanner</span><span class='period'>.</span><span class='id identifier rubyid_scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*?(\z|\n)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="#IF_KEYWORDS-constant" title="Synvert::Core::Engine::Elegant::IF_KEYWORDS (constant)">IF_KEYWORDS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_keyword'>keyword</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_rest'>rest</span> <span class='op'>=~</span> <span class='const'><span class='object_link'><a href="#DO_BLOCK_REGEX-constant" title="Synvert::Core::Engine::Elegant::DO_BLOCK_REGEX (constant)">DO_BLOCK_REGEX</a></span></span>
      <span class='id identifier rubyid_leading_spaces_counts'>leading_spaces_counts</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_leading_spaces_count'>leading_spaces_count</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_new_code'>new_code</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_rest'>rest</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu May 30 13:57:11 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.36 (ruby-3.2.4).
</div>

    </div>
  </body>
</html>